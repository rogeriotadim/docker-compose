{
	"variables": [],
	"info": {
		"name": "hora das contas",
		"_postman_id": "c9c21630-4012-b881-af65-0e9d4a00d139",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "Pagamento",
			"description": "Testes da entidade Pagamento",
			"item": [
				{
					"name": "Pagamento Na Lista",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests.statusCode200 = responseCode.code === 200;",
									"var jsonData = JSON.parse(responseBody);",
									"var criacao = \"2017-02-10 12:12:00.000000\";",
									"var atualizacao = \"2017-02-10 12:12:00.000000\";",
									"var idPagto = Number(postman.getEnvironmentVariable(\"idPagamentoPAT\"));",
									"",
									"tests.listacomPagamentos = jsonData.length >=1;",
									"",
									"for (var i = 0; i < jsonData.length; i++){",
									"    var pagamento = jsonData[i];",
									"    if(pagamento.id === idPagto){",
									"        tests.descricao = pagamento.descricao === \"cta Luz\";",
									"        tests.idUsuario = pagamento.id_usuario === 2;",
									"        tests.created_at = pagamento.created_at.date === criacao;",
									"        tests.updated_at = pagamento.updated_at.date === atualizacao;",
									"        tests.data_pagto = pagamento.data_pagto === \"2017-02-05\";",
									"        tests.competencia = pagamento.competencia === 201704;",
									"        tests.valor = pagamento.valor === \"54.18\";",
									"        tests.id_liquidacao = pagamento.id_liquidacao === null;",
									"        tests.id_parcelamento = pagamento.id_parcelamento === null;",
									"    }",
									"}",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{protocol}}://{{host}}/hdc/v1/pagamento",
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "d0763edaa9d9bd2a9516280e9044d000",
								"description": ""
							}
						],
						"body": {},
						"description": "Pagamentos especifico dentro da lista de pagamentos"
					},
					"response": []
				},
				{
					"name": "Pagamento_id",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests.statusCode200 = responseCode.code === 200;",
									"var jsonData = JSON.parse(responseBody);",
									"var criacao = \"2017-02-10 12:12:00.000000\";",
									"var atualizacao = \"2017-02-10 12:12:00.000000\";",
									"var idPagto = postman.getEnvironmentVariable(\"idPagamentoROG\");",
									"",
									"tests.idPagamento = jsonData.id === Number(postman.getEnvironmentVariable(\"idPagamentoROG\"));",
									"tests.descricao = jsonData.descricao === \"Internet\";",
									"tests.idUsuario = jsonData.id_usuario === 1;",
									"tests.created_at = jsonData.created_at.date === criacao;",
									"tests.update_at = jsonData.updated_at.date === atualizacao;",
									"tests.data_pagto = jsonData.data_pagto === \"2017-02-05\";",
									"tests.competencia = jsonData.competencia === 201704;",
									"tests.valor = jsonData.valor === \"72.37\";",
									"tests.id_liquidacao = jsonData.id_liquidacao === null;",
									"tests.id_parcelamento = jsonData.id_parcelamento === null;",
									"",
									"tests.test = postman.getEnvironmentVariable(\"idPagamentoROG\") === \"8\";",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{protocol}}://{{host}}/hdc/v1/pagamento/{{idPagamentoROG}}",
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "d0763edaa9d9bd2a9516280e9044d885",
								"description": ""
							}
						],
						"body": {},
						"description": ""
					},
					"response": []
				},
				{
					"name": "Pagamentos por Competencia",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests.statusCode200 = responseCode.code === 200;",
									"var jsonData = JSON.parse(responseBody);",
									"var criacao = \"2017-02-10 12:12:00.000000\";",
									"var atualizacao = \"2017-02-10 12:12:00.000000\";",
									"var idPagto = Number(postman.getEnvironmentVariable(\"idPagamentoPAT\"));",
									"",
									"tests.listacomPagamentos = jsonData.length >=1;",
									"",
									"for (var i = 0; i < jsonData.length; i++){",
									"    var pagamento = jsonData[i];",
									"    if(pagamento.id === idPagto){",
									"        tests.descricao = pagamento.descricao === \"cta Luz\";",
									"        tests.idUsuario = pagamento.id_usuario === 2;",
									"        tests.created_at = pagamento.created_at.date === criacao;",
									"        tests.updated_at = pagamento.updated_at.date === atualizacao;",
									"        tests.data_pagto = pagamento.data_pagto === \"2017-02-05\";",
									"        tests.competencia = pagamento.competencia === 201704;",
									"        tests.valor = pagamento.valor === \"54.18\";",
									"        tests.id_liquidacao = pagamento.id_liquidacao === null;",
									"        tests.id_parcelamento = pagamento.id_parcelamento === null;",
									"    }",
									"}",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{protocol}}://{{host}}/hdc/v1/pagamento/comp/201704",
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "d0763edaa9d9bd2a9516280e9044d000",
								"description": ""
							}
						],
						"body": {},
						"description": "Retorna os pagamentos da Compentencia"
					},
					"response": []
				},
				{
					"name": "Pagamentos do Usuário ",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests.statusCode200 = responseCode.code === 200;",
									"var jsonData = JSON.parse(responseBody);",
									"var criacao = \"2017-05-02 21:18:37.000000\";",
									"var atualizacao = \"2017-05-02 21:18:37\";",
									"var idPagto = Number(postman.getEnvironmentVariable(\"idPagamentoPAT\"));",
									"",
									"tests.listacomPagamentos = jsonData.length >=1;",
									"",
									"for (var i = 0; i < jsonData.length; i++){",
									"    var pagamento = jsonData[i];",
									"    if(pagamento.id === idPagto){",
									"        tests.descricao = pagamento.descricao === \"cta Luz\";",
									"        tests.idUsuario = pagamento.id_usuario === 2;",
									"        tests.created_at = pagamento.created_at.date === criacao;",
									"        tests.update_at = pagamento.update_at === atualizacao;",
									"        tests.data_pagto = pagamento.data_pagto === \"2017-02-05\";",
									"        tests.competencia = pagamento.competencia === 201704;",
									"        tests.valor = pagamento.valor === \"54\";",
									"        tests.id_liquidacao = pagamento.id_liquidacao === null;",
									"        tests.id_parcelamento = pagamento.id_parcelamento === null;",
									"    }",
									"}",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{protocol}}://{{host}}/hdc/v1/pagamento/usuario/2",
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "d0763edaa9d9bd2a9516280e9044d000",
								"description": ""
							}
						],
						"body": {},
						"description": "recupera pagamentos do usuário"
					},
					"response": []
				},
				{
					"name": "Pagamento_incluir",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests.statusCode200 = responseCode.code === 200;",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests.idPagamento = jsonData.id > 0;",
									"",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{protocol}}://{{host}}/hdc/v1/pagamento",
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "d0763edaa9d9bd2a9516280e9044d885",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\t{\n\t\t\"id_usuario\":\"1\",\n\t\t\"descricao\":\"Teste de Pagamento via Postman/Newman\",\n\t\t\"data_pagto\":\"2017-04-05\",\n\t\t\"competencia\":\"201704\",\n\t\t\"valor\":\"54.339\"\n\t}\n"
						},
						"description": "Inclusão de Pagamento"
					},
					"response": []
				},
				{
					"name": "Pagamento não encontrado - Alterar",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests.statusCode400 = responseCode.code === 400;",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests.mensagem = jsonData.mensagem_de_erro === 'pagamento_nao_encontrado';",
									"",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{protocol}}://{{host}}/hdc/v1/pagamento/2000",
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "d0763edaa9d9bd2a9516280e9044d885",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\t{\n\t\t\"id_usuario\":\"1\",\n\t\t\"descricao\":\"Teste Alteração de Pagamento via Postman/Newman\",\n\t\t\"data_pagto\":\"2017-04-05\",\n\t\t\"competencia\":\"201704\",\n\t\t\"valor\":\"54.339\"\n\t}\n"
						},
						"description": "Tentativa de Alteração de Pagamento inexistente"
					},
					"response": []
				},
				{
					"name": "Pagamento não encontrado - Deletar",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"tests.statusCode404 = responseCode.code === 404;",
									"var jsonData = JSON.parse(responseBody);",
									"",
									"tests.mensagem = jsonData.mensagem_de_erro === 'pagamento_nao_encontrado';",
									"",
									""
								]
							}
						}
					],
					"request": {
						"url": "{{protocol}}://{{host}}/hdc/v1/pagamento/2000",
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "d0763edaa9d9bd2a9516280e9044d885",
								"description": ""
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"description": ""
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"description": "Tentativa de Exclusão de Pagamento inexistente"
					},
					"response": []
				}
			]
		},
		{
			"name": "Login ok",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var jsonData = JSON.parse(responseBody);",
							"tests[\"username\"] = jsonData[\"username\"] === \"ROG\";",
							"tests[\"id\"] = jsonData[\"id\"] === 1;",
							"tests[\"email\"] = jsonData[\"email\"] === \"rogeriotadim@gmail.com\";",
							"tests[\"apikey\"] = jsonData[\"apikey\"] === \"d0763edaa9d9bd2a9516280e9044d885\";",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": {
						"username": "rogeriotadim@gmail.com",
						"password": "dcc0m1C%",
						"saveHelperData": true,
						"showPassword": false
					}
				},
				"url": "{{protocol}}://{{host}}/login/v1/login",
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic cm9nZXJpb3RhZGltQGdtYWlsLmNvbTpkY2MwbTFDJQ==",
						"description": ""
					}
				],
				"body": {},
				"description": "Teste dos atributos do usuário"
			},
			"response": []
		},
		{
			"name": "Teste sem user e sem pass",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 401\"] = responseCode.code === 401;",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": {
						"username": "",
						"password": "",
						"saveHelperData": true,
						"showPassword": false
					}
				},
				"url": "{{protocol}}://{{host}}/login/v1/login",
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic Og==",
						"description": ""
					}
				],
				"body": {},
				"description": "Retorna 401"
			},
			"response": []
		},
		{
			"name": "Teste sem pass",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Status code is 401\"] = responseCode.code === 401;",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": {
						"username": "rogeriotadim@gmail.com",
						"password": "",
						"saveHelperData": true,
						"showPassword": false
					}
				},
				"url": "{{protocol}}://{{host}}/login/v1/login",
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic cm9nZXJpb3RhZGltQGdtYWlsLmNvbTo=",
						"description": ""
					}
				],
				"body": {},
				"description": "Retorna 401"
			},
			"response": []
		}
	]
}